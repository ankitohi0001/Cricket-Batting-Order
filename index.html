<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HTML to Image with WhatsApp Share</title>
    <script src="https://cdn.jsdelivr.net/npm/html2canvas@1.4.1/dist/html2canvas.min.js"></script>
</head>
<body>
    <div id="capture" style="padding: 10px; border: 1px solid #d3d3d3;">
        <h4>Hello world!</h4>
        <p>This is an example of converting HTML to an image using JavaScript.</p>
    </div>
    <button id="captureBtn">Capture</button>
    <button id="shareBtn" style="display:none;">Share on WhatsApp</button>
    <div id="result"></div>

    <script>
        let imgUrl;

        document.getElementById('captureBtn').addEventListener('click', function() {
            html2canvas(document.getElementById('capture')).then(function(canvas) {
                // Append the canvas to the result div
                document.getElementById('result').innerHTML = ''; // Clear previous results
                document.getElementById('result').appendChild(canvas);

                // Convert canvas to image data URL
                imgUrl = canvas.toDataURL("image/png");

                // Create an image element and set its source to the canvas data URL
                var imageElement = document.createElement("img");
                imageElement.src = imgUrl;

                // Append the image to the result div (you can replace the canvas with the image if you prefer)
                document.getElementById('result').appendChild(imageElement);

                // Show the WhatsApp share button
                document.getElementById('shareBtn').style.display = 'inline';
            });
        });

        document.getElementById('shareBtn').addEventListener('click', function() {
            // Create WhatsApp share link
            let whatsappUrl = `https://api.whatsapp.com/send?text=${encodeURIComponent('Check out this image: ' + imgUrl)}`;
            
            // Open WhatsApp share link in a new window
            window.open(whatsappUrl, '_blank');
        });
    </script>
</body>
</html>
